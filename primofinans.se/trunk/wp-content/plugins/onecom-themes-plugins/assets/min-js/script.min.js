!function(c){function i(e){var t=jQuery(e.target).attr("data-filter-key");t=t||c("#oc_theme_filter").find(".oc-active-filter").attr("data-filter-key");var a,i,n,o=c(".pagination-item.current").attr("data-request_page"),r=c(".theme-browser").attr("data-item_count"),s=null,d=Math.ceil(c("#theme-browser-page-1 ."+t).length/r);"oc_theme_filter"===c(e.target).parent().attr("id")&&(o=1,n=d,c(".theme-browser-pagination .current").removeClass("current"),c(".theme-browser-pagination .first").addClass("current"),c(".theme-browser-pagination a").hide(),1<n&&c(".theme-browser-pagination a").slice(0,n).show(),c(".oc-active-filter").removeClass("oc-active-filter"),c(e.target).addClass("oc-active-filter")),m(c(".all")),"all"!==t?(m(jQuery(".one-theme").not(jQuery("."+t))),s=1<d?(a=(o-1)*r,i=o*r,c("."+t).slice(a,i)):c("."+t),l(jQuery(s))):l(c(".page-"+o))}function l(e){c(e).removeClass("hidden_theme"),c(".theme-browser-page").hide(),c(".theme-browser-page-filtered").show().append(c(e).clone())}function m(e){c(".theme-browser-page-filtered").find(e).remove()}function t(e){for(var t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var i=t[a].split("=");if(i[0]==e)return i[1]}return!1}function s(e){e&&1==e?c(".inline_badge").show():c(".inline_badge").hide()}function a(){TB_WIDTH=75*c(window).width()/100,TB_HEIGHT=85*c(window).height()/100,c("#TB_window").css({marginLeft:"-"+parseInt(TB_WIDTH/2,10)+"px",width:TB_WIDTH+"px"}),c("#TB_window").css({marginTop:"-"+parseInt(TB_HEIGHT/2,10)+"px",height:TB_HEIGHT+"px"})}function d(e){var t,a="",i=e,n=c("#theme-browser-page-1").find(c('[data-index="'+i+'"]'));c("#theme-browser-page-1").find(c('[data-index="'+i+'"]')).length,a=c(n).find(c(".theme-action")).find("[data-theme_slug]").data("theme_slug"),isPremiumInt=c(n).data("is-premium")||"0","0"==isPremiumInt?t="false":"1"==isPremiumInt&&(t="true"),a&&(themeName=a.trim()),oc_trigger_log({actionType:"wppremium_preview_theme",isPremium:t,theme:a})}c(document).ready(function(){screenshotPreview(),0<c(".onecom-move-up").length&&c(".onecom-move-up").click(function(){return c("html, body").animate({scrollTop:0},"slow"),!1}),c(document).on("click",".one-install, .one-installed",function(){c(".loading-overlay.fullscreen-loader").addClass("show");var n=c(this),o=1==c(this).parents(".one-theme.theme").first().attr("data-is-premium")?"ptheme":"stheme";oc_validate_action(o).then(function(e){var t,a,i;if("ptheme"==o&&(t="true"),"stheme"==o&&(t="false"),"onecom_install_theme"===n.data("name")&&(a="install",i="wppremium_install_theme"),"onecom_activate_theme"===n.data("name")&&(a="activate",i="wppremium_activate_theme"),"success"===e.status)return function(e){var i=c(e),n=c(e).parents(".one-theme:first");c(n).addClass("active");var t=c(e).attr("data-name"),a=c(e).attr("data-theme_slug"),o=c(e).attr("data-redirect"),r=onecom_vars.network;if(void 0!==t&&""!=t){void 0===r&&(r=!1);var s={action:t,theme_slug:a,redirect:o,network:r};c(n).addClass("active"),c.post(ajaxurl,s,function(e){var t=c.parseJSON(e);if(void 0!==t.type&&"redirect"==t.type)window.location=t.url;else{c(".onecom-notifier").html(t.message).attr("type",t.type).addClass("show");var a=5e3;"success"==t.type&&(c(n).addClass("installed"),c(i).removeClass("one-install").addClass("one-installed"),c(i).find(".action-text").remove(),c(i).find("> span").append(t.button_html),c(i).attr("data-name","onecom_activate_theme"),a=1500),setTimeout(function(){c(".onecom-notifier").removeClass("show"),c(".loading-overlay.fullscreen-loader").removeClass("show")},a)}})}}(n),oc_trigger_log({actionType:i,isPremium:t,theme:n.data("theme_slug")}),!0;"failed"===e.status?(jQuery("#oc_um_overlay").show(),ocSetModalData({isPremium:t,feature:"theme",theme:n.data("theme_slug"),featureAction:a}),c(".loading-overlay.fullscreen-loader").removeClass("show")):e.msg&&oc_alert(e.msg,"error",5e3)})}),c(document).on("click",".install-now, .activate-plugin-ajax",function(e){e.preventDefault();var i=c(this),n=c(this).parents(".one-plugin-card:first"),t=c(this).attr("data-download_url"),a=c(this).attr("data-slug"),o=c(this).attr("data-name"),r=c(this).attr("data-action"),s=c(this).attr("data-redirect"),d=void 0!==c(this).attr("data-plugin_type")?c(this).attr("data-plugin_type"):"";c(".loading-overlay.fullscreen-loader").addClass("show");var l={action:r,plugin_slug:a,plugin_name:o,download_url:t,plugin_type:d,redirect:s};c.post(ajaxurl,l,function(e){var t=c.parseJSON(e);if(console.log(t),void 0!==t.type&&"redirect"==t.type)window.location=t.url;else{c(".onecom-notifier").html(t.message).attr("type",t.type).addClass("show");var a=5e3;"success"==t.type&&(c(n).addClass("activate"),c(i).after(t.button_html),c(i).remove(),a=1500),setTimeout(function(){c(".onecom-notifier").removeClass("show"),c(".loading-overlay.fullscreen-loader").removeClass("show")},a)}})}),c(".pagination-item").click(function(e){e.preventDefault(),c(this).is(".current")||(c(".pagination-item").removeClass("current"),c(this).addClass("current"),i(e))});var t=c("#one-confirmation"),e=t.attr("data-yes_string"),a=t.attr("data-no_string");t.dialog({dialogClass:"wp-dialog wp-one-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,width:"25%",hide:{effect:"explode",duration:1e3},resizable:!1,buttons:[{text:a,class:"button",click:function(){c(this).dialog("close")}},{text:e,class:"button button-primary",click:function(){var e=c(this).data("element"),t=c(e).parents("form:first");c(t)[0].submit(),c(this).dialog("close")}}]}),c(".one-deactivate-plugin").click(function(e){e.preventDefault(),t.data("element",this).dialog("open")}),c(".discouraged-modal-close").click(function(){c("#one-confirmation").dialog("close")}),c(".one-theme").hover(function(){c(this).addClass("active")},function(){c(this).removeClass("active")}),c("#oc_theme_filter li").click(function(e){i(e)}),c("#oc_theme_filter_select").change(function(e){var t=c(this).val(),a=c('li[data-filter-key="'+t+'"]').text();c('li[data-filter-key="'+t+'"]').trigger("click"),c(".oc_select_wrapper span").text(a)})}),c(window).scroll(function(){onecom_move_up_toggle()}),c(window).load(function(){onecom_move_up_toggle()}),window.onpopstate=function(e){if(void 0!==e&&null!=e.state)var a=e.state.paged;else void 0!==(a=t("paged"))&&""!=a&&null!=a||(a=1);c(".pagination-item").each(function(e,t){c(t).attr("data-request_page")!=a||c(t).trigger("click")})},this.screenshotPreview=function(){xOffset=10,yOffset=30,c(".one-screenshot").hover(function(e){this.t=this.title;var t=(this.title="")!=this.t?"<br/>"+this.t:"";c("body").append("<p id='one-screenshot'><img src='"+c(this).attr("data-preview")+"' alt='url preview' />"+t+"</p>"),c("#screenshot").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px").fadeIn("fast")},function(){this.title=this.t,c("#one-screenshot").remove()}),c(".one-screenshot").mousemove(function(e){c("#one-screenshot").css("top",e.pageY-xOffset+"px").css("left",e.pageX+yOffset+"px")})},c(window).on("resize",a),c(document).on("thickbox:iframe:loaded",function(e){a(),c("#TB_iframeContent").contents().find("head").append(c("<style type='text/css'> .plugin-install-php #plugin-information-footer {display:none !important;} </style>"))}),c(document).on("click",".preview_link",function(){var e=c(this).parents(".one-theme:first"),t=c(".theme-browser > div.one-theme").length,a=c(this).attr("data-demo-url");c("iframe").attr("src",a);var i=c(this).attr("data-id"),n=c(this).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");c(".header_btn_bar .next").attr("data-demo-id",n);var o=c(this).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");c(".header_btn_bar .previous").attr("data-demo-id",o),s(c(this).parents(".one-theme:first").attr("data-is-premium")),c(".header_btn_bar .theme-info").attr("data-theme-count",t),c(".header_btn_bar .theme-info").attr("data-active-demo-id",i),c(".header_btn_bar .preview-install-button").attr("data-active-demo-id",i),c(".header_btn_bar .next").removeAttr("style"),c(".header_btn_bar .previous").removeAttr("style");var r=c(this).attr("data-id");0===c("#demo-"+r).closest(".one-theme").prev(".one-theme").length&&(c(".header_btn_bar .previous").css({opacity:"0.5",cursor:"initial"}),c(".header_btn_bar .previous").attr("data-demo-id","0"));r=c(this).attr("data-id");0===c("#demo-"+r).closest(".one-theme").next(".one-theme").length&&(c(".header_btn_bar .next").css({opacity:"0.5",cursor:"initial"}),c(".header_btn_bar .next").attr("data-demo-id","0")),c(e).hasClass("installed")?c(".header_btn_bar").find(".preview-install-button").hide():c(".header_btn_bar").find(".preview-install-button").show(),tb_show("Preview Popup","#TB_inline?width=full&height=full&inlineId=thickbox_preview&modal=true&class=thickbox",null),c("body").addClass("preview_page"),d(r,"preview")}),c(document).on("click",".close_btn",function(){tb_remove(),setTimeout(function(){c("body").removeClass("preview_page")},500)}),c(document).on("click",".one-dialog-close",function(){tb_remove()}),c(document).on("click",".preview-install-button",function(){var a=c(this).attr("data-active-demo-id"),i=null;c(".one-theme").each(function(e,t){if(c(t).find(".preview_link").attr("data-id")===a)return i=t,!1}),null!=i&&(c("html, body").stop().animate({scrollTop:c(i).offset().top-64},300),c(".close_btn").trigger("click"),c(i).find(".one-install").trigger("click"))}),c(document).on("click","#desktop",function(){c(".preview-container .phone-content").removeClass("phone-content").addClass("desktop-content"),c(".preview-container .preview span").remove(".screen-rotate"),c(".preview-container").removeClass("scroll"),c(".preview-container iframe").removeClass("horizontal"),c(".desktop-content").removeClass("horizontal"),c("#desktop").addClass("current"),c("#mobile").removeClass("current")}),c(document).on("click","#mobile",function(){c(".preview-container .desktop-content").removeClass("desktop-content").addClass("phone-content"),c(".preview-container").addClass("scroll"),c(".preview-container .preview").append('<span class="screen-rotate"></span>'),c("#desktop").removeClass("current"),c("#mobile").addClass("current")}),c(document).on("click",".screen-rotate",function(){c(".preview-container iframe").toggleClass("horizontal"),c(".phone-content").toggleClass("horizontal")}),c(document).on("click",".header_btn_bar .next",function(){var e=c(this).attr("data-demo-id"),t=c("#preview_box .theme-info").attr("data-active-demo-id"),a=c("#demo-"+e).closest(".one-theme").next(".one-theme").length;if(c(".header_btn_bar .preview-install-button").attr("data-active-demo-id",e),d(e,"navigation"),s(c('[data-index="'+e+'"]').attr("data-is-premium")),"0"===e)event.stopPropagation();else if(0===a){c(this).css({opacity:"0.5",cursor:"initial"}),c(this).attr("data-demo-id",0),c(".header_btn_bar .previous").attr("data-demo-id",t);var i=c("#demo-"+e).attr("data-demo-url"),n=c("#demo-"+e).parents(".one-theme:first");c("iframe").attr("src",i),c(".header_btn_bar .theme-info").attr("data-active-demo-id",e)}else{c(".header_btn_bar .previous").removeAttr("style");i=c("#demo-"+e).attr("data-demo-url"),n=c("#demo-"+e).parents(".one-theme:first");c("iframe").attr("src",i);var o=c("#demo-"+e).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");c(this).attr("data-demo-id",o),c(".header_btn_bar .previous").attr("data-demo-id",t),c(".header_btn_bar .theme-info").attr("data-active-demo-id",e)}c(n).hasClass("installed")?c(".header_btn_bar").find(".preview-install-button").hide():c(".header_btn_bar").find(".preview-install-button").show()}),c(document).on("click",".header_btn_bar .previous",function(){var e=c(this).attr("data-demo-id"),t=c("#preview_box .theme-info").attr("data-active-demo-id"),a=c("#demo-"+e).closest(".one-theme").prev(".one-theme").length;if(c(".header_btn_bar .preview-install-button").attr("data-active-demo-id",e),d(e,"navigation"),s(c('[data-index="'+e+'"]').attr("data-is-premium")),"0"===e)event.stopPropagation();else if(0===a){c(this).css({opacity:"0.5",cursor:"initial"}),c(this).attr("data-demo-id",0),c(".header_btn_bar .next").attr("data-demo-id",t);var i=c("#demo-"+e).attr("data-demo-url"),n=c("#demo-"+e).parents(".one-theme:first");c("iframe").attr("src",i),c(".header_btn_bar .theme-info").attr("data-active-demo-id",e)}else{c(".header_btn_bar .next").removeAttr("style");i=c("#demo-"+e).attr("data-demo-url"),n=c("#demo-"+e).parents(".one-theme:first");c("iframe").attr("src",i);var o=c("#demo-"+e).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");c(this).attr("data-demo-id",o),c(".header_btn_bar .next").attr("data-demo-id",t),c(".header_btn_bar .theme-info").attr("data-active-demo-id",e)}c(n).hasClass("installed")?c(".header_btn_bar").find(".preview-install-button").hide():c(".header_btn_bar").find(".preview-install-button").show()}),this.onecom_move_up_toggle=function(){if(0==c(".onecom-move-up").length)return!1;c(window).height()/2<=c(window).scrollTop()?c(".onecom-move-up").addClass("show"):c(".onecom-move-up").removeClass("show")}}(jQuery);